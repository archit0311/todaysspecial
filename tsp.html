<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olive & Brew - Today's Special</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.6/babel.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Poppins&display=swap">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f8f9fa;
            font-family: 'Poppins', sans-serif;
            text-align: center;
            padding: 20px;
        }
        .menu-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
        }
        h1 {
            font-size: 2.5rem;
            font-family: 'Montserrat', sans-serif;
        }
        .menu-item {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }
        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }
        .menu-description {
            margin-top: 5px;
            color: #555;
        }
        .description {
            margin-top: 20px;
            max-width: 500px;
            font-size: 0.9rem;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>Today's Special</h1>
    <div id="root" class="menu-container"></div>
    <p class="description">
        Our Today's Specials are exclusive chef-curated dishes, either in the experimental phase before joining our main menu or requiring special preparation in limited quantities. Featuring them here ensures that our guests experience these unique creations before they become widely available.
    </p>
    <script type="text/babel">
        const { useState, useEffect } = React;

        function SpecialMenu() {
            const [menuItems, setMenuItems] = useState([]);
            const [openIndex, setOpenIndex] = useState(null);

            useEffect(() => {
                async function fetchMenu() {
                    try {
                        const response = await fetch("menu.json");
                        const data = await response.json();
                        setMenuItems(data.menu);
                    } catch (error) {
                        console.error("Error fetching menu:", error);
                    }
                }
                fetchMenu();
            }, []);

            const today = new Date().getDay();
            const isWeekend = (today === 0 || today === 6); 

            const filteredItems = menuItems.filter(item => {
                if (item.stock.toUpperCase() !== "Y") return false;
                if (isWeekend && item.holidays.toUpperCase() !== "Y") return false;
                return true;
            });

            const toggleDescription = (index) => {
                setOpenIndex(openIndex === index ? null : index);
            };

            return (
                <>
                    {filteredItems.length > 0 ? (
                        filteredItems.map((item, index) => (
                            <div key={index} className="menu-item" onClick={() => toggleDescription(index)}>
                                <div className="menu-header">
                                    <span>{item.name}</span>
                                    <span>{item.price} {openIndex === index ? "▲" : "▼"}</span>
                                </div>
                                {openIndex === index && (
                                    <p className="menu-description">{item.description}</p>
                                )}
                            </div>
                        ))
                    ) : (
                        <p>No items available today.</p>
                    )}
                </>
            );
        }

        ReactDOM.render(<SpecialMenu />, document.getElementById("root"));
    </script>
</body>
</html>
